{% extends "base.html" %}
{% load static %}

{% block title %}Admin Dashboard - {{ block.super }}{% endblock %}

{% block content %}
<div class="admin-dashboard">
    <div class="dashboard-header">
        <h1>Admin Dashboard</h1>
        <div class="dashboard-nav">
            <a href="{% url 'events:admin_events' %}" class="btn btn-primary">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M8 2v4M16 2v4M3 10h18M5 4h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V6a2 2 0 012-2z"/>
                </svg>
                Manage Events
            </a>
            <a href="{% url 'events:admin_create_event' %}" class="btn btn-secondary">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 5v14M5 12h14"/>
                </svg>
                Create Event
            </a>
            <a href="{% url 'events:admin_sponsors' %}" class="btn btn-outline-primary">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                Sponsors
            </a>
            <a href="{% url 'events:admin_sponsorship_applications' %}" class="btn btn-outline-secondary">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14,2 14,8 20,8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10,9 9,9 8,9"/>
                </svg>
                Applications
            </a>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M8 2v4M16 2v4M3 10h18M5 4h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V6a2 2 0 012-2z"/>
                </svg>
            </div>
            <div class="stat-content">
                <h3>{{ total_events }}</h3>
                <p>Total Events</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon published">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M9 11l3 3 8-8"/>
                    <path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9c1.24 0 2.43.25 3.5.7"/>
                </svg>
            </div>
            <div class="stat-content">
                <h3>{{ published_events }}</h3>
                <p>Published Events</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon draft">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
                </svg>
            </div>
            <div class="stat-content">
                <h3>{{ draft_events }}</h3>
                <p>Draft Events</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon featured">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
            </div>
            <div class="stat-content">
                <h3>{{ featured_events }}</h3>
                <p>Featured Events</p>
            </div>
        </div>
    </div>

    <!-- Recent Events -->
    <div class="dashboard-section">
        <h2>Recent Events</h2>
        <div class="events-table">
            <table>
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Category</th>
                        <th>City</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for event in recent_events %}
                    <tr>
                        <td>
                            <div class="event-info">
                                <h4>{{ event.title }}</h4>
                                <p>{{ event.venue_name }}</p>
                            </div>
                        </td>
                        <td>
                            <span class="category-badge">{{ event.category.name }}</span>
                        </td>
                        <td>{{ event.city.name }}</td>
                        <td>{{ event.start_date|date:"M d, Y" }}</td>
                        <td>
                            <span class="status-badge status-{{ event.status }}">
                                {{ event.get_status_display }}
                            </span>
                        </td>
                        <td>
                            <div class="actions">
                                <a href="{% url 'events:admin_event_detail' event.pk %}" class="btn btn-sm">View</a>
                                <a href="{% url 'events:admin_edit_event' event.pk %}" class="btn btn-sm btn-primary">Edit</a>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6" class="empty-state">No recent events found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Upcoming Events -->
    <div class="dashboard-section">
        <h2>Upcoming Events</h2>
        <div class="events-grid">
            {% for event in upcoming_events %}
            <div class="event-card">
                <div class="event-image">
                    {% if event.image %}
                        <img src="{{ event.image.url }}" alt="{{ event.title }}">
                    {% else %}
                        <div class="placeholder-image">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <path d="M21 15l-5-5L5 21"/>
                            </svg>
                        </div>
                    {% endif %}
                </div>
                <div class="event-content">
                    <h3>{{ event.title }}</h3>
                    <p class="event-meta">{{ event.start_date|date:"M d, Y" }} â€¢ {{ event.city.name }}</p>
                    {% if event.status == 'sold_out' %}
                        <span class="sold-out-badge">
                            <svg class="icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M15 9l-6 6M9 9l6 6"/>
                            </svg>
                            Sold Out
                        </span>
                    {% endif %}
                    <div class="event-actions">
                        <a href="{% url 'events:admin_event_detail' event.pk %}" class="btn btn-sm">View</a>
                        <a href="{% url 'events:admin_edit_event' event.pk %}" class="btn btn-sm btn-primary">Edit</a>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="empty-state">
                <p>No upcoming events found.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
