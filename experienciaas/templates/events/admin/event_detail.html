{% extends "base.html" %}
{% load static %}

{% block title %}{{ event.title }} - Admin Detail - {{ block.super }}{% endblock %}

{% block content %}
<div class="admin-detail">
    <div class="admin-header">
        <h1>{{ event.title }}</h1>
        <div class="admin-nav">
            <a href="{% url 'events:admin_dashboard' %}" class="btn btn-secondary">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                    <polyline points="9,22 9,12 15,12 15,22"/>
                </svg>
                Dashboard
            </a>
            <a href="{% url 'events:admin_events' %}" class="btn btn-secondary">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M9 11l3 3 8-8"/>
                    <path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9c1.24 0 2.43.25 3.5.7"/>
                </svg>
                All Events
            </a>
            <a href="{% url 'events:detail' event.slug %}" class="btn btn-primary" target="_blank">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                </svg>
                View Public
            </a>
            <a href="{% url 'events:admin_edit_event' event.pk %}" class="btn btn-primary">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
                </svg>
                Edit Event
            </a>
        </div>
    </div>

    <div class="event-detail-grid">
        <!-- Event Overview -->
        <div class="detail-section main-section">
            <div class="event-hero">
                {% if event.image %}
                    <div class="event-image">
                        <img src="{{ event.image.url }}" alt="{{ event.title }}">
                    </div>
                {% endif %}
                <div class="event-meta">
                    <div class="status-badges">
                        <span class="status-badge status-{{ event.status }}">
                            {{ event.get_status_display }}
                        </span>
                        {% if event.is_featured %}
                            <span class="featured-badge">Featured</span>
                        {% endif %}
                    </div>
                    <h2>{{ event.title }}</h2>
                    <p class="event-description">{{ event.description|linebreaks }}</p>
                </div>
            </div>

            <!-- Event Details -->
            <div class="event-details">
                <div class="detail-grid">
                    <div class="detail-item">
                        <h4>Category</h4>
                        <p>{{ event.category.name }}</p>
                    </div>
                    <div class="detail-item">
                        <h4>Organizer</h4>
                        <p>{{ event.organizer.name }} ({{ event.organizer.email }})</p>
                    </div>
                    <div class="detail-item">
                        <h4>Start Date</h4>
                        <p>{{ event.start_date|date:"F d, Y g:i A" }}</p>
                    </div>
                    <div class="detail-item">
                        <h4>End Date</h4>
                        <p>{{ event.end_date|date:"F d, Y g:i A" }}</p>
                    </div>
                    <div class="detail-item">
                        <h4>Duration</h4>
                        <p>{{ event.duration }}</p>
                    </div>
                    <div class="detail-item">
                        <h4>Price Type</h4>
                        <p>{{ event.get_price_type_display }}</p>
                    </div>
                    {% if event.price_type == 'paid' %}
                    <div class="detail-item">
                        <h4>Price</h4>
                        <p>${{ event.price }}</p>
                    </div>
                    {% endif %}
                    <div class="detail-item">
                        <h4>Max Attendees</h4>
                        <p>{{ event.max_attendees|default:"Unlimited" }}</p>
                    </div>
                </div>
            </div>

            <!-- Location Details -->
            <div class="location-details">
                <h3>Location</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <h4>City</h4>
                        <p>{{ event.city.name }}, {{ event.city.country }}</p>
                    </div>
                    <div class="detail-item">
                        <h4>Venue</h4>
                        <p>{{ event.venue_name }}</p>
                    </div>
                    <div class="detail-item wide">
                        <h4>Address</h4>
                        <p>{{ event.address }}</p>
                    </div>
                    {% if event.latitude and event.longitude %}
                    <div class="detail-item">
                        <h4>Coordinates</h4>
                        <p>{{ event.latitude }}, {{ event.longitude }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="detail-sidebar">
            <!-- Statistics -->
            <div class="stats-card">
                <h3>Event Statistics</h3>
                <div class="stat-items">
                    <!-- Attendance Stats -->
                    <div class="stat-group">
                        <h4 class="stat-group-title">Asistencia</h4>
                        <div class="stat-row">
                            <div class="stat-item">
                                <span class="stat-number">{{ event.tickets.count }}</span>
                                <span class="stat-label">Registrados</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">{{ event.available_spots|default:"∞" }}</span>
                                <span class="stat-label">Disponibles</span>
                            </div>
                        </div>
                        {% if event.max_attendees %}
                        <div class="stat-row">
                            <div class="stat-item full-width">
                                <span class="stat-number">{{ event.occupancy_rate }}%</span>
                                <span class="stat-label">Ocupación</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: {{ event.occupancy_rate }}%"></div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Sponsorship Stats -->
                    {% if event.max_sponsors > 0 %}
                    <div class="stat-group">
                        <h4 class="stat-group-title">Patrocinios</h4>
                        <div class="stat-row">
                            <div class="stat-item">
                                <span class="stat-number">{{ event.sponsors_count }}</span>
                                <span class="stat-label">Actuales</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">{{ event.available_sponsor_slots }}</span>
                                <span class="stat-label">Disponibles</span>
                            </div>
                        </div>
                        <div class="stat-row">
                            <div class="stat-item full-width">
                                <span class="stat-number">{{ event.pending_applications_count }}</span>
                                <span class="stat-label">Postulaciones Pendientes</span>
                            </div>
                        </div>
                        {% if not event.sponsorship_open %}
                        <div class="sponsorship-status closed">
                            <i class="fas fa-lock"></i> Postulaciones Cerradas
                        </div>
                        {% elif event.available_sponsor_slots == 0 %}
                        <div class="sponsorship-status full">
                            <i class="fas fa-check-circle"></i> Completamente Patrocinado
                        </div>
                        {% else %}
                        <div class="sponsorship-status open">
                            <i class="fas fa-unlock"></i> Aceptando Postulaciones
                        </div>
                        {% endif %}
                    </div>
                    {% else %}
                    <div class="stat-group">
                        <h4 class="stat-group-title">Patrocinios</h4>
                        <div class="sponsorship-disabled">
                            <i class="fas fa-ban"></i>
                            <span>Patrocinios Deshabilitados</span>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="actions-card">
                <h3>Quick Actions</h3>
                <div class="action-buttons">
                    {% if event.status == 'draft' %}
                        <form method="post" action="{% url 'events:admin_bulk_actions' %}">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="publish">
                            <input type="hidden" name="selected_events" value="{{ event.id }}">
                            <button type="submit" class="btn btn-primary btn-block">
                                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                                Publish Event
                            </button>
                        </form>
                    {% elif event.status == 'published' %}
                        <form method="post" action="{% url 'events:admin_bulk_actions' %}">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="unpublish">
                            <input type="hidden" name="selected_events" value="{{ event.id }}">
                            <button type="submit" class="btn btn-secondary btn-block">
                                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <path d="M2 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8"/>
                                </svg>
                                Unpublish Event
                            </button>
                        </form>
                    {% endif %}

                    {% if not event.is_featured %}
                        <form method="post" action="{% url 'events:admin_bulk_actions' %}">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="feature">
                            <input type="hidden" name="selected_events" value="{{ event.id }}">
                            <button type="submit" class="btn btn-secondary btn-block">
                                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                                Feature Event
                            </button>
                        </form>
                    {% else %}
                        <form method="post" action="{% url 'events:admin_bulk_actions' %}">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="unfeature">
                            <input type="hidden" name="selected_events" value="{{ event.id }}">
                            <button type="submit" class="btn btn-secondary btn-block">
                                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                                Unfeature Event
                            </button>
                        </form>
                    {% endif %}

                    <a href="{% url 'events:admin_event_tickets' event.pk %}" class="btn btn-secondary btn-block">
                        <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M15 5v2M15 11v2M15 17v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 11-4 0V7a2 2 0 00-2-2H5z"/>
                        </svg>
                        Manage Tickets
                    </a>
                </div>
            </div>

            <!-- Event Info -->
            <div class="info-card">
                <h3>Event Information</h3>
                <div class="info-items">
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">{{ event.created_at|date:"M d, Y g:i A" }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Updated</span>
                        <span class="info-value">{{ event.updated_at|date:"M d, Y g:i A" }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Slug</span>
                        <span class="info-value">{{ event.slug }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">ID</span>
                        <span class="info-value">{{ event.id }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Registrations -->
    {% if event.tickets.exists %}
    <div class="registrations-section">
        <h3>Recent Registrations</h3>
        <div class="registrations-table">
            <table>
                <thead>
                    <tr>
                        <th>Attendee</th>
                        <th>Email</th>
                        <th>Registration Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for ticket in event.tickets.all|slice:":10" %}
                    <tr>
                        <td>{{ ticket.user.name|default:ticket.user.email }}</td>
                        <td>{{ ticket.user.email }}</td>
                        <td>{{ ticket.created_at|date:"M d, Y g:i A" }}</td>
                        <td>
                            <span class="status-badge status-{{ ticket.status }}">{{ ticket.get_status_display }}</span>
                        </td>
                        <td>
                            <div class="actions">
                                <a href="mailto:{{ ticket.user.email }}" class="btn btn-sm" title="Email">
                                    <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                        <polyline points="22,6 12,13 2,6"/>
                                    </svg>
                                </a>
                                
                                {% if ticket.status == 'pending' %}
                                    <!-- Confirm Payment Button -->
                                    <form method="post" action="{% url 'events:admin_confirm_ticket' ticket.pk %}" style="display: inline;">
                                        {% csrf_token %}
                                        <input type="hidden" name="next" value="{{ request.get_full_path }}">
                                        <button type="submit" class="btn btn-sm btn-success" title="Confirmar Pago"
                                                onclick="return confirm('¿Confirmar el pago de este ticket?')">
                                            <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                <polyline points="20,6 9,17 4,12"/>
                                            </svg>
                                        </button>
                                    </form>
                                {% endif %}
                                
                                {% if ticket.status != 'cancelled' %}
                                    <!-- Cancel Registration Button -->
                                    <form method="post" action="{% url 'events:admin_cancel_ticket' ticket.pk %}" style="display: inline;">
                                        {% csrf_token %}
                                        <input type="hidden" name="next" value="{{ request.get_full_path }}">
                                        <button type="submit" class="btn btn-sm btn-danger" title="Cancelar Ticket"
                                                onclick="return confirm('¿Estás seguro de que quieres cancelar este ticket?')">
                                            <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                <line x1="18" y1="6" x2="6" y2="18"/>
                                                <line x1="6" y1="6" x2="18" y2="18"/>
                                            </svg>
                                        </button>
                                    </form>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="registrations-footer">
            <a href="{% url 'events:admin_event_tickets' event.pk %}" class="btn btn-primary">
                View All Registrations ({{ event.tickets.count }})
            </a>
        </div>
    </div>
    {% endif %}

    <!-- Sponsors Section -->
    {% if event.max_sponsors > 0 %}
    <div class="sponsors-section">
        <div class="section-header">
            <h3>Event Sponsors</h3>
            <a href="{% url 'events:admin_add_event_sponsor' event.pk %}" class="btn btn-primary">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="16"/>
                    <line x1="8" y1="12" x2="16" y2="12"/>
                </svg>
                Add Sponsor
            </a>
        </div>
        
        {% if event_sponsors %}
        <div class="sponsors-table">
            <table>
                <thead>
                    <tr>
                        <th>Sponsor</th>
                        <th>Tier</th>
                        <th>Display Order</th>
                        <th>Contact</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sponsor_data in event_sponsors %}
                    {% with event_sponsor=sponsor_data.event_sponsor supplier_profile=sponsor_data.supplier_profile has_robust_profile=sponsor_data.has_robust_profile %}
                    <tr>
                        <td>
                            <div class="sponsor-info">
                                {% if has_robust_profile and supplier_profile.company_logo %}
                                    <img src="{{ supplier_profile.company_logo.url }}" alt="{{ supplier_profile.company_name }}" 
                                         style="width: 40px; height: 40px; object-fit: contain; margin-right: 10px;">
                                {% elif event_sponsor.sponsor.logo %}
                                    <img src="{{ event_sponsor.sponsor.logo.url }}" alt="{{ event_sponsor.sponsor.name }}" 
                                         style="width: 40px; height: 40px; object-fit: contain; margin-right: 10px;">
                                {% endif %}
                                <div>
                                    <strong>
                                        {% if has_robust_profile %}
                                            {{ supplier_profile.company_name }}
                                        {% else %}
                                            {{ event_sponsor.sponsor.name }}
                                        {% endif %}
                                    </strong>
                                    {% if has_robust_profile and supplier_profile.company_website %}
                                        <br><a href="{{ supplier_profile.company_website }}" target="_blank" class="small text-muted">{{ supplier_profile.company_website }}</a>
                                    {% elif event_sponsor.sponsor.website %}
                                        <br><a href="{{ event_sponsor.sponsor.website }}" target="_blank" class="small text-muted">{{ event_sponsor.sponsor.website }}</a>
                                    {% endif %}
                                </div>
                            </div>
                        </td>
                        <td>
                            <span class="tier-badge tier-{{ event_sponsor.tier }}">
                                {{ event_sponsor.get_tier_display }}
                            </span>
                        </td>
                        <td>{{ event_sponsor.display_order }}</td>
                        <td>
                            <div class="contact-info">
                                {% if has_robust_profile %}
                                    <div>{{ supplier_profile.business_email|default:event_sponsor.sponsor.contact_email }}</div>
                                    {% if supplier_profile.business_phone %}
                                        <div class="small text-muted">{{ supplier_profile.business_phone }}</div>
                                    {% elif event_sponsor.sponsor.contact_phone %}
                                        <div class="small text-muted">{{ event_sponsor.sponsor.contact_phone }}</div>
                                    {% endif %}
                                {% else %}
                                    <div>{{ event_sponsor.sponsor.contact_email }}</div>
                                    {% if event_sponsor.sponsor.contact_phone %}
                                        <div class="small text-muted">{{ event_sponsor.sponsor.contact_phone }}</div>
                                    {% endif %}
                                {% endif %}
                            </div>
                        </td>
                        <td>
                            <div class="actions">
                                <a href="{% url 'events:admin_edit_event_sponsor' event_sponsor.pk %}" class="btn btn-sm" title="Edit">
                                    <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                    </svg>
                                </a>
                                <a href="{% url 'events:admin_delete_event_sponsor' event_sponsor.pk %}" class="btn btn-sm btn-danger" title="Remove"
                                   onclick="return confirm('Are you sure you want to remove this sponsor from the event?')">
                                    <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <polyline points="3,6 5,6 21,6"/>
                                        <path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"/>
                                    </svg>
                                </a>
                            </div>
                        </td>
                    </tr>
                    {% endwith %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="empty-state">
            <p>No sponsors added yet.</p>
        </div>
        {% endif %}
    </div>

    <!-- Sponsorship Applications Section -->
    {% if sponsorship_applications %}
    <div class="applications-section">
        <div class="section-header">
            <h3>Sponsorship Applications</h3>
            <a href="{% url 'events:admin_sponsorship_applications' %}?event={{ event.id }}" class="btn btn-secondary">
                View All Applications
            </a>
        </div>
        
        <div class="applications-table">
            <table>
                <thead>
                    <tr>
                        <th>Company</th>
                        <th>Contact</th>
                        <th>Tier</th>
                        <th>Status</th>
                        <th>Applied</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for application in sponsorship_applications|slice:":5" %}
                    <tr>
                        <td>
                            <div>
                                <strong>{{ application.company_name }}</strong>
                                {% if application.company_website %}
                                    <br><a href="{{ application.company_website }}" target="_blank" class="small text-muted">{{ application.company_website }}</a>
                                {% endif %}
                            </div>
                        </td>
                        <td>
                            <div class="contact-info">
                                <div>{{ application.contact_name }}</div>
                                <div class="small text-muted">{{ application.contact_email }}</div>
                                {% if application.contact_phone %}
                                    <div class="small text-muted">{{ application.contact_phone }}</div>
                                {% endif %}
                            </div>
                        </td>
                        <td>
                            <span class="tier-badge tier-{{ application.proposed_tier }}">
                                {{ application.get_proposed_tier_display }}
                            </span>
                        </td>
                        <td>
                            <span class="status-badge status-{{ application.status }}">
                                {{ application.get_status_display }}
                            </span>
                        </td>
                        <td>{{ application.created_at|date:"M d, Y" }}</td>
                        <td>
                            <div class="actions">
                                <a href="{% url 'events:admin_sponsorship_application_detail' application.pk %}" class="btn btn-sm" title="View Details">
                                    <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </a>
                                {% if application.status == 'pending' %}
                                    <form method="post" action="{% url 'events:admin_approve_sponsorship_application' application.pk %}" style="display: inline;">
                                        {% csrf_token %}
                                        <button type="submit" class="btn btn-sm btn-success" title="Approve" 
                                                onclick="return confirm('Approve this sponsorship application?')">
                                            <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                <polyline points="20,6 9,17 4,12"/>
                                            </svg>
                                        </button>
                                    </form>
                                    <form method="post" action="{% url 'events:admin_reject_sponsorship_application' application.pk %}" style="display: inline;">
                                        {% csrf_token %}
                                        <button type="submit" class="btn btn-sm btn-danger" title="Reject"
                                                onclick="return confirm('Reject this sponsorship application?')">
                                            <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                <line x1="18" y1="6" x2="6" y2="18"/>
                                                <line x1="6" y1="6" x2="18" y2="18"/>
                                            </svg>
                                        </button>
                                    </form>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}
    {% endif %}
</div>

<style>
/* Sponsor section styles */
.sponsors-section, .applications-section {
    margin-top: 2rem;
    background: white;
    border-radius: 8px;
    padding: 1.5rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #e5e7eb;
}

.sponsor-info {
    display: flex;
    align-items: center;
}

.contact-info {
    font-size: 0.875rem;
}

.tier-badge {
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.tier-platinum { background-color: #e5e7eb; color: #374151; }
.tier-gold { background-color: #fbbf24; color: #1f2937; }
.tier-silver { background-color: #d1d5db; color: #374151; }
.tier-bronze { background-color: #a78bfa; color: #1f2937; }
.tier-partner { background-color: #3b82f6; color: white; }

/* Ticket Status Badges */
.status-pending { background-color: #fbbf24; color: #1f2937; }
.status-confirmed { background-color: #10b981; color: white; }
.status-cancelled { background-color: #ef4444; color: white; }
.status-approved { background-color: #10b981; color: white; }
.status-rejected { background-color: #ef4444; color: white; }
.status-contacted { background-color: #3b82f6; color: white; }

.empty-state {
    text-align: center;
    padding: 2rem;
    color: #6b7280;
}

.sponsors-table table, .applications-table table {
    width: 100%;
    border-collapse: collapse;
}

.sponsors-table th, .applications-table th,
.sponsors-table td, .applications-table td {
    padding: 0.75rem;
    text-align: left;
    border-bottom: 1px solid #e5e7eb;
}

.sponsors-table th, .applications-table th {
    background-color: #f9fafb;
    font-weight: 600;
    color: #374151;
}

/* Statistics Layout Improvements */
.stats-card .stat-items {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.stat-group {
    background: #f8fafc;
    border-radius: 6px;
    padding: 1rem;
    border: 1px solid #e2e8f0;
}

.stat-group-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: #475569;
    margin: 0 0 0.75rem 0;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.stat-row {
    display: flex;
    gap: 1rem;
    margin-bottom: 0.75rem;
}

.stat-row:last-child {
    margin-bottom: 0;
}

.stat-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    min-width: 0;
}

.stat-item.full-width {
    flex: 1 1 100%;
}

.stat-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e293b;
    line-height: 1.2;
}

.stat-label {
    font-size: 0.75rem;
    color: #64748b;
    margin-top: 0.25rem;
    font-weight: 500;
}

.progress-bar {
    width: 100%;
    height: 4px;
    background-color: #e2e8f0;
    border-radius: 2px;
    margin-top: 0.5rem;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background-color: #3b82f6;
    transition: width 0.3s ease;
}

.sponsorship-status {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
    margin-top: 0.5rem;
}

.sponsorship-status.open {
    background-color: #dcfce7;
    color: #166534;
}

.sponsorship-status.closed {
    background-color: #fef3c7;
    color: #92400e;
}

.sponsorship-status.full {
    background-color: #dbeafe;
    color: #1e40af;
}

.sponsorship-disabled {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 1rem;
    color: #6b7280;
    font-size: 0.875rem;
    background-color: #f9fafb;
    border: 1px dashed #d1d5db;
    border-radius: 4px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .event-detail-grid {
        grid-template-columns: 1fr;
    }
    
    .stat-row {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .stat-item {
        padding: 0.5rem;
        background: white;
        border-radius: 4px;
        border: 1px solid #e2e8f0;
    }
}

@media (max-width: 480px) {
    .stats-card {
        padding: 1rem;
    }
    
    .stat-group {
        padding: 0.75rem;
    }
    
    .stat-number {
        font-size: 1.25rem;
    }
    
    .stat-label {
        font-size: 0.7rem;
    }
}
</style>

<script>
// Enhanced ticket management functionality
document.addEventListener('DOMContentLoaded', function() {
    // Add any additional JavaScript functionality here if needed
    console.log('Event admin panel loaded with enhanced ticket management');
});
</script>
{% endblock %}
